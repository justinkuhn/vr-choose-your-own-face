<html>

<head>
    <title>GusTest</title>
    <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
    <script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
    <!-- REGISTERING A COMPONENT -->
    <script>
    AFRAME.registerComponent('tractor-beam', {
        schema: {
            // target: { type: "selector" }
        },



        handler: function(event) {
          let cameraPos = document.querySelector('#camera').getAttribute('position');
          let cameraString = String(cameraPos.x) + ' ' + String(cameraPos.y) + ' ' + String(cameraPos.z)
          let animation = document.createElement('a-animation');
          let animId = 'anim-redBox'
          animation.setAttribute('id', animId)
          animation.setAttribute('attribute', 'position');
          animation.setAttribute('to', cameraString);
          animation.setAttribute('dur', '1000');
          animation.setAttribute('fill', 'forwards');
          event.target.appendChild(animation)
        },

        init: function() {
            var el = this.el
            el.addEventListener("mouseenter", this.handler, true);
            el.addEventListener('mouseleave', function h(e) {
              el.removeEventListener('mouseenter', this.handler, true)
              el.removeEventListener('mouseleave', h)
            }.bind(this))
        }
    })
    </script>
</head>

<body>
    <a-scene raycaster="far: 100; objects: [link];" cursor="rayOrigin: mouse" camera-position onmousedown="mouseNotClicked = false;" light="defaultLightsEnabled: true;">
        <a-assets>
        </a-assets>
        <!-- CAMERA -->
        <a-camera id='camera' position="0 1.6 0" universal-controls>
            <a-cursor />
        </a-camera>
        <a-entity environment="skyType: gradient; 
                               grid: none;
                               skyColor: #eeeeee;
                               horizonColor: #440000;
                               dressingScale: 3;
                               dressing: trees;
                               dressingColor: #ff6538;
                               dressingAmount: 250;
                               groundColor: #0d4838;
                               groundColor2: #0d4838;
                               shadow: true;
                               ground: hills;
                               groundYScale: 2;
                               playArea: 0.2">
        </a-entity>
        <a-text value="Welcome to Gus Test!" position="0 1 -3" align="center" scale="4 4 4 "></a-text>
        <a-entity id='redBox' position="3 2 0" geometry="primitive: box" material="color: red" light="type: point; intensity: 0.5" tractor-beam>
        </a-entity>
        <a-cone id='blueCone', position='-3 5 0' material="color: blue" light="type:point; intensity=2.0" tractor-beam></a-cone>
    </a-scene>
</body>
</html>